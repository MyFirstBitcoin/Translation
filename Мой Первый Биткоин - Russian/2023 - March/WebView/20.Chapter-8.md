## _Глава №8_

# ***Построение Цепочки Безопасности: Понимание Процесса Майнинга Биткойнов и его Роли в Блокчейне***

- [**8.0** Раскрытие Жемчужин Блокчейна: Знакомство с Майнерами и Процессом Майнинга](https://github.com/BabaevDaniel/Bitcoin-Diploma-Russian-Version/blob/main/Translated-text/20.Chapter-8.md#80-%D1%80%D0%B0%D1%81%D0%BA%D1%80%D1%8B%D1%82%D0%B8%D0%B5-%D0%B6%D0%B5%D0%BC%D1%87%D1%83%D0%B6%D0%B8%D0%BD-%D0%B1%D0%BB%D0%BE%D0%BA%D1%87%D0%B5%D0%B9%D0%BD%D0%B0-%D0%B7%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE-%D1%81-%D0%BC%D0%B0%D0%B9%D0%BD%D0%B5%D1%80%D0%B0%D0%BC%D0%B8-%D0%B8-%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%BE%D0%BC-%D0%BC%D0%B0%D0%B9%D0%BD%D0%B8%D0%BD%D0%B3%D0%B0)    
- [**8.1** Динамическая Система Вознаграждений за Майнинг Биткойнов: Вознаграждения за Блок, Комиссии за Транзакции и Сокращение Вдвое](https://github.com/BabaevDaniel/Bitcoin-Diploma-Russian-Version/blob/main/Translated-text/20.Chapter-8.md#81-%D0%B4%D0%B8%D0%BD%D0%B0%D0%BC%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0-%D0%B2%D0%BE%D0%B7%D0%BD%D0%B0%D0%B3%D1%80%D0%B0%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B9-%D0%B7%D0%B0-%D0%BC%D0%B0%D0%B9%D0%BD%D0%B8%D0%BD%D0%B3-%D0%B1%D0%B8%D1%82%D0%BA%D0%BE%D0%B9%D0%BD%D0%BE%D0%B2-%D0%B2%D0%BE%D0%B7%D0%BD%D0%B0%D0%B3%D1%80%D0%B0%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B7%D0%B0-%D0%B1%D0%BB%D0%BE%D0%BA-%D0%BA%D0%BE%D0%BC%D0%B8%D1%81%D1%81%D0%B8%D0%B8-%D0%B7%D0%B0-%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B0%D0%BA%D1%86%D0%B8%D0%B8-%D0%B8-%D1%81%D0%BE%D0%BA%D1%80%D0%B0%D1%89%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2%D0%B4%D0%B2%D0%BE%D0%B5)    
- [**8.2** Важнейшая Задача Майнинга Биткойнов: Обеспечение Безопасности Блокчейна](https://github.com/BabaevDaniel/Bitcoin-Diploma-Russian-Version/blob/main/Translated-text/20.Chapter-8.md#82-%D0%B2%D0%B0%D0%B6%D0%BD%D0%B5%D0%B9%D1%88%D0%B0%D1%8F-%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-%D0%BC%D0%B0%D0%B9%D0%BD%D0%B8%D0%BD%D0%B3%D0%B0-%D0%B1%D0%B8%D1%82%D0%BA%D0%BE%D0%B9%D0%BD%D0%BE%D0%B2-%D0%BE%D0%B1%D0%B5%D1%81%D0%BF%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B1%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D0%B8-%D0%B1%D0%BB%D0%BE%D0%BA%D1%87%D0%B5%D0%B9%D0%BD%D0%B0)    
- [**8.3** Анализ Блока](https://github.com/BabaevDaniel/Bitcoin-Diploma-Russian-Version/blob/main/Translated-text/20.Chapter-8.md#83-%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B0)    
- [**8.4** Перефразирование Хешей – Без Каламбура](https://github.com/BabaevDaniel/Bitcoin-Diploma-Russian-Version/blob/main/Translated-text/20.Chapter-8.md#84-%D0%BF%D0%B5%D1%80%D0%B5%D1%84%D1%80%D0%B0%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%85%D0%B5%D1%88%D0%B5%D0%B9--%D0%B1%D0%B5%D0%B7-%D0%BA%D0%B0%D0%BB%D0%B0%D0%BC%D0%B1%D1%83%D1%80%D0%B0)    
- [**8.5** Пошаговый Процесс Майнинга Блока](https://github.com/BabaevDaniel/Bitcoin-Diploma-Russian-Version/blob/main/Translated-text/20.Chapter-8.md#85-%D0%BF%D0%BE%D1%88%D0%B0%D0%B3%D0%BE%D0%B2%D1%8B%D0%B9-%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81-%D0%BC%D0%B0%D0%B9%D0%BD%D0%B8%D0%BD%D0%B3%D0%B0-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B0)    
  - [**8.5.1** Классовое Упражнение: Интерактивное Упражнение по Майнингу](https://github.com/BabaevDaniel/Bitcoin-Diploma-Russian-Version/blob/main/Translated-text/20.Chapter-8.md#851-%D0%BA%D0%BB%D0%B0%D1%81%D1%81%D0%BE%D0%B2%D0%BE%D0%B5-%D1%83%D0%BF%D1%80%D0%B0%D0%B6%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%BD%D0%BE%D0%B5-%D1%83%D0%BF%D1%80%D0%B0%D0%B6%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D0%BE-%D0%BC%D0%B0%D0%B9%D0%BD%D0%B8%D0%BD%D0%B3%D1%83)    
  - [**8.5.2** Краткое Описание Транзакции от Начала до Конца](https://github.com/BabaevDaniel/Bitcoin-Diploma-Russian-Version/blob/main/Translated-text/20.Chapter-8.md#852-%D0%BA%D1%80%D0%B0%D1%82%D0%BA%D0%BE%D0%B5-%D0%BE%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B0%D0%BA%D1%86%D0%B8%D0%B8-%D0%BE%D1%82-%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%B0-%D0%B4%D0%BE-%D0%BA%D0%BE%D0%BD%D1%86%D0%B0)    
  - [**8.5.3** Не Доверяй, Проверяй](https://github.com/BabaevDaniel/Bitcoin-Diploma-Russian-Version/blob/main/Translated-text/20.Chapter-8.md#853-%D0%BD%D0%B5-%D0%B4%D0%BE%D0%B2%D0%B5%D1%80%D1%8F%D0%B9-%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D1%8F%D0%B9)    
- [**8.6** Классное Упражнение: Транзакция с UTXO](https://github.com/BabaevDaniel/Bitcoin-Diploma-Russian-Version/blob/main/Translated-text/20.Chapter-8.md#86-%D0%BA%D0%BB%D0%B0%D1%81%D1%81%D0%BD%D0%BE%D0%B5-%D1%83%D0%BF%D1%80%D0%B0%D0%B6%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B0%D0%BA%D1%86%D0%B8%D1%8F-%D1%81-utxo)    




_________________________________________________________________________________________

### ***8.0 Раскрытие Жемчужин Блокчейна: Знакомство с Майнерами и Процессом Майнинга***    

Шахтеры — это бухгалтеры.

- В централизованных системах, компании платят бухгалтерам за отслеживание и поддержание точности и целостности своих финансовых отчетов.

Аналогичным образом, майнерам платят в биткойнах за их работу по проверке и добавлению транзакций в блокчейн, помогая поддерживать безопасность и бесперебойную работу сети. Эта работа предполагает использование вычислительной мощности и специализированного оборудования. Цель майнинга — добавлять новые блоки в блокчейн и поддерживать его безопасность, децентрализацию и долгосрочную жизнеспособность.

Что такое майнинг биткойнов?

Майнинг биткойнов — это процесс добавления информации о транзакциях в публичный журнал прошлых транзакций Биткойна или в блокчейн.

Этот реестр прошлых транзакций называется цепочкой блоков, поскольку он представляет собой строку блоков.
Эта цепочка служит для проверки совершения транзакций всех этих других сетей.

Биткойн-узлы используют эту технологическую цепочку, чтобы отличить подлинную биткойн-транзакцию от попыток повторно потратить монеты, которые, возможно, уже были потрачены где-то еще.

Майнеры собирают неподтвержденные транзакции и формируют блок, а затем приступают к поиску ценного ключа, который обеспечит место блока в блокчейне.

Ключ представляет собой «действительный хэш блока», который скрыт среди миллиардов других и может быть разблокирован только с помощью определенного ключа, установленного сетью.

Представьте себе гигантский стог сена, наполненный миллионами ключей, каждый из которых представляет собой уникальный хэш блока. В сети установлен определенный ключ, который откроет ценный приз. Майнеры перебирают стог сена, пробуя каждый ключ в замке, но только одному майнеру повезет найти правильное совпадение.

Первый майнер, обнаруживший правильный хэш блока, передает его в сеть вместе с блоком транзакций. Затем другие майнеры проверяют решение, чтобы убедиться, что оно правильно подходит к замку. Если решение верное, блок добавляется в блокчейн, создавая безопасный и общедоступный реестр.

За свою тяжелую работу майнеры вознаграждаются двумя способами: вознаграждением за блок и комиссией за транзакцию. Награды за блоки — это вновь сгенерированные биткойны, которые выпускаются в обращение с каждым добавленным в блокчейн блоком. С другой стороны, комиссии за транзакции — это небольшие суммы биткойнов, которые пользователи платят за более быструю обработку своих транзакций и присвоение приоритета майнеру в блоке. Майнеры могут свободно выбирать, какие транзакции включать в блок, который они добывают, и они часто отдают предпочтение тем, у которых самая высокая комиссия за транзакцию.




_________________________________________________________________________________________

### ***8.1 Динамическая Система Вознаграждений за Майнинг Биткойнов: Вознаграждения за Блок, Комиссии за Транзакции и Сокращение Вдвое***    

Сатоши Накамото, создатель Биткойна, придумал умное решение для распространения новых биткойнов через систему вознаграждения за блок децентрализованным способом.

График поставок биткойнов — это его план создания и выпуска в обращение новых биткойнов, который предназначен для поддержания дефицита биткойнов с течением времени.

На заре существования Биткойна, майнеры получали 50 биткойнов за каждый добытый ими блок. Это вознаграждение за блок, служит финансовой мотивацией для майнеров чтобы инвестировать в мощное оборудование и электроэнергию для своих операций по добыче полезных ископаемых.

Однако, чтобы контролировать поставку новых биткойнов и поддерживать стабильность в сети, вознаграждение за блок уменьшается вдвое примерно каждые 210,000 блоков. Этот процесс, известный как «халвинг», уменьшает количество новых биткойнов, выпускаемых в обращение, и продолжает стимулировать майнеров защищать сеть и обеспечивает её децентрализацию.

- Допустим, у вас есть банка, вмещающая всего 1000 конфет. Каждый день вы можете добавлять в банку 10 конфет. Именно так создаются новые биткойны и добавляются к их запасам в процессе майнинга. Однако каждые четыре года количество конфет, которое вы можете добавить в банку, сокращается вдвое.

Это похоже на сокращение биткойна вдвое, что замедляет скорость создания новых биткойнов. Конечная цель — поддерживать дефицит и ограничить общее количество биткойнов до 21 миллиона единиц, точно так же, как в банке может храниться только ограниченное количество конфет.

График поставок биткойнов

Всего существующих BTC

Награды майнеров за успешное завершение 1 блока

СОКРАЩАЙТЕ ПОЛОВИНУ каждые 210 000 блоков или в среднем каждые 4 года.

Монеты, которые нужно добывать

Добыты новые монеты

Новые монеты, добытые с момента последнего халвинга




_________________________________________________________________________________________

Процесс сокращения вдвое похож на то, как запасы золотых рудников ограничены, и со временем их становится все труднее найти. Сегодня протокол Биткойн выпускает 6,25 новых BTC для майнеров примерно каждые 10 минут при добыче блока.

В таблице показаны подробности о следующих событиях сокращения пополам для Биткойна, включая процент от общего объема ресурсов, который будет добыт к этой дате, ожидаемую дату следующего события сокращения пополам и номер блока, в котором ожидается событие сокращения пополам.

Событие.
Ожидаемая дата.
Блок.
Вознаграждение блока.
Процент добытого.

Четвертый халвинг.
Пятый халвинг.
Шестой халвинг.

Циркулирующися запас относится к количеству биткойнов, которые в настоящее время находятся в обороте и доступны для торговли. Это измерение представляет собой общее количество монет, которые были добыты и находятся в обороте в любой момент времени, исключая любые монеты, которые могут быть заблокированы или потеряны навсегда.

По мере того, как будет добыто больше биткойнов, циркулируюмый запас и процент от общего количества добытых биткойнов будут продолжать увеличиваться, пока общее количество биткойнов не достигнет 21 миллиона.

Биткойн: процент для 21-миллионна от добытого запаса

Циркулирующися запас BTC
Оставшийся запас




_________________________________________________________________________________________

Уровень инфляции — это скорость, с которой циркулируюмый запас криптовалюты увеличивается с течением времени, выраженное в процентах от общего количества. Эта ставка рассчитывается как разница между циркулируюмым запасом и общим максимальным запасом (21 миллионов), деленная на общей максимальный запас и умноженная на 100.

Во время каждого события халвинга, вознаграждение за блок для майнеров уменьшается, что снижает скорость выпуска новых биткойнов. В результате уровень инфляции биткойнов со временем снижается, что потенциально может привести к увеличению цены биткойнов.

Сокращение запаса в сочетании с растущим спросом может привести к росту цены биткойнов. Это не только приносит пользу тем, кто первым внедрил эту технологию, но также служит стимулом для майнеров продолжать защищать сеть и вносить свой вклад в свою вычислительную мощность и ресурсы.


### ***8.2 Важнейшая Задача Майнинга Биткойнов: Обеспечение Безопасности Блокчейна***    

Что такое действительный хэш блока в блокчейне?

Хэш блока служит уникальным идентификатором для каждого блока в блокчейне и помогает обнаружить любые попытки изменить прошлые транзакции. Блоки в блокчейне хранят транзакции и образуют цепочку блоков, начиная с исходного блока и заканчивая самым последним, создавая публичную и прозрачную запись всех транзакций. Хэш блока связывает каждый блок с предыдущим, позволяя любому просмотреть историю любой транзакции и обеспечивая точность и безопасность данных, хранящихся в сети. Точно так же, как отпечаток пальца идентифицирует человека, хеш блока идентифицирует каждый уникальный блок в блокчейне.

Самый первый блок биткойна, содержащий в общей сложности 50 биткойнов, был добыт создателем биткойна Сатоши Накамото.

Блоки «связаны» друг с другом путем установления определенных отношений между блоками. То есть блок должен содержать «отпечаток пальца», который представляет собой хеш-значение данных предыдущего блока. Хэш-функция может сжимать произвольное сообщение (информацию блока) до фиксированного размера (например, 160 бит) и создавать отпечаток сообщения.

Хэш блока 1




_________________________________________________________________________________________

Хотя хэш блока можно использовать для проверки целостности данных в блоке, он не раскрывает всю информацию внутри блока. Доступ к информации внутри блока можно получить только с помощью криптографических ключей, необходимых для её декодирования. Хэш блока просто обеспечивает средство проверки того, что данные в блоке не были изменены.

Гонка за добычу блока

Майнеры участвуют в соревновании за раскрытие хеша блока, который соответствует целевому значению (специальному номеру), установленному сетью. Майнеру, который успешно обнаружит правильный хэш блока, предоставляется возможность добавить этот блок в блокчейн и присвоить ему соответствующий хэш-идентификатор. Это решение служит проверкой подлинности блока.

- Майнинг можно сравнить с гонкой, цель которой — как можно быстрее добраться до финиша. Целевая сложность в гонке периодически корректируется, что усложняет добычу блока по мере того, как к гонке присоединяются все больше майнеров.

- Допустим, цель, установленная сетью в блокчейне, равна 1000. Майнерам придется использовать свои компьютеры для поиска специального числа, называемого хэшем блока, которое меньше 1000. Первый майнер, который найдет хеш блока, который менее 1000 получает возможность добавить группу транзакций в блокчейн и вознаграждается биткойнами.

Результат хеширования должен быть ниже целью, чтобы добавить блок в блокчейн.

Цель является общей для всех узлов.


Уровень сложности — это мера того, насколько сложно найти действительный хэш блока, соответствующий цели, установленной сетью. Он периодически корректируется, чтобы гарантировать, что блоки добавляются в блокчейн с постоянной скоростью. Уровень сложности выражается числом, и чем выше уровень сложности, тем сложнее найти хеш блока, соответствующий цели.

Например, рассмотрим два разных хеша:

Хэш 1:
Уровень сложности: 1



_________________________________________________________________________________________

В этом примере Хэш 2 имеет более высокий уровень сложности, чем Хэш 1, поскольку в начале требуется больше нулей. Это означает, что на более высоком уровне сложности труднее найти хеш блока, соответствующий целевому значению, установленному сетью.

Поиск действительного хеша блока требует большой компьютерной работы.

Найдя действительный хэш блока, майнер демонстрирует, что он выполнил работу, необходимую для добавления нового блока в блокчейн, и получает оплату в биткойнах за свои усилия. Доказательство работы (PoW) — это метод, который Биткойн использует для проверки транзакций и добавления новых блоков в блокчейн.

PoW обеспечивает безопасность блокчейна, затрудняя контроль над ним для тех, кто имеет злонамеренные намерения. Цель корректируется таким образом, чтобы каждые 10 минут добывался один блок, что делает сеть ещё безопаснее, поскольку цель становится все труднее достичь.

Например, цель, установленная сетью для добычи определенного блока, может быть следующей:

Это означает, что первый майнер, который найдет хэш с восемью ведущими нулями, достигнет этой цели, поэтому ему будет разрешено добавить блок в блокчейн и получить компенсацию в биткойнах.


Роль шахтеров.

На самом деле у майнеров в сети блокчейн есть две задачи: 1) проверка транзакций и 2) добавление новых блоков.

Они собирают неподтвержденные транзакции в свой мемпул, выбирают их подмножество для включения в свой блок-кандидат, а затем ищут хэш блока.




_________________________________________________________________________________________

Несколько майнеров могут работать над созданием новых блоков одновременно. Первый майнер, обнаруживший хэш блока, соответствующий целью, установленному сетью, объявляет об этом сети, а остальные майнеры затем проверяют транзакции в блоке-кандидате этого майнера, чтобы убедиться в их достоверности. Если транзакции действительно действительны, блок добавляется в блокчейн. Остальные блоки, созданные другими майнерами в это время, не добавляются и отбрасываются. Этот процесс помогает поддерживать консенсус внутри сети и предотвращает двойные расходы.


### ***8.3 Анализ Блока***

Блокчейн состоит из блоков, похожих на страницы в бухгалтерской книге, в которых хранятся новые транзакции. Каждый блок имеет заголовок со сводкой данных, ссылку на предыдущий блок и уникальный номер, называемый одноразовым номером, или номер, используемый один раз, и некоторые другие детали. Задача майнеров — правильно заполнить информацию заголовка при создании блоков-кандидатов.

Организация транзакции

Майнеры должны оформлять транзакции в своих блоках-кандидатах в определенном формате, где в заголовок включается только некоторая информация.

Транзакции составляют основу сети Биткойн и эффективно и безопасно организуются с помощью Деревьев Меркла. Эти деревья конденсируют большие объемы данных в компактное представление, повышая общую безопасность и эффективность сети.




_________________________________________________________________________________________

Корневой Хэш Меркла, то есть данные, включенные в заголовок, представляет собой единое значение хеш-функции, которое действует как цифровой отпечаток пальца для всех транзакций в блоке. Это позволяет эффективно проверять транзакции без необходимости проверять каждую из них по отдельности, что делает её важным компонентом безопасности и масштабируемости Сети Биткойн.

Если транзакция включена в блок, её хеш будет включен в Корневой Хеш Меркла. Если какая-либо часть данных изменится, окончательный код будет другим, что позволит легко обнаружить любые вредоносные изменения в данных. Это помогает поддерживать конфиденциальность и защищать конфиденциальную информацию, содержащуюся в каждой транзакции в сети.

Если хакер попытается изменить один символ в транзакции, последующие проверки блока завершится неудачей, поскольку каждый блок зависит от информации из предыдущего блока. Корень Меркла действует как безопасная цепочка, которая связывает все транзакции в блоке, обеспечивая точность и целостность данных в сети.

Транзакция Coinbase в Биткойне — это особый тип транзакции, включенный в каждый блок блокчейна. Он служит двум целям: во-первых, он вознаграждает майнера, который успешно добыл блок, и, во-вторых, предоставляет адрес для получения комиссии за транзакцию.

Эта транзакция также включена в Дерево Меркла. В отличие от других транзакций, транзакция Coinbase не имеет вводных данных, поскольку она генерирует новые монеты с помощью программного алгоритма. Вместо этого он создает новый неизрасходованный вывод транзакции (UTXO), который можно использовать в качестве вводных данных для будущих транзакций.

Строительные блоки блока: понимание заголовка блока в блокчейне

Заголовок блока похож на обложку книги; он предоставляет краткое изложение его содержания и важные детали блока.

- Хэш блока: действительный уникальный код блока, по которому он идентифицируется. Хэш блока можно использовать для проверки согласованности информации в блоке каждый раз, когда он проверяется.
- Версия: это своего рода метка, которая сообщает вам, какую версию программного обеспечения использовал человек, создавший блок.
- Хэш предыдущего блока: это действительный хэш блока, который был до того, который вы просматриваете. Он гарантирует, что блоки расположены в правильном порядке и что никто не сможет изменить предыдущие блоки, не затрагивая при этом текущий и все блоки, следующие за ним.




_________________________________________________________________________________________

Заголовок блока.
Версия.
Предыдущий блок.
Корень Меркла.
Временная метка.
Биты.
Нонс.

- Корневой хеш Меркла: SHA256 (Hash(H(1,2),H(3,4,)), Hash(H(5,6),H(7,8)……)). Это обновляет определенные UTXO в цепочке.
- Время: это время, когда человек, создавший блок, начал над ним работать.
- Биты: это похоже на код, который сообщает вам, насколько сложно было создать этот блок. Его еще называют «целевым значением».
- Нонс: Нонс — это уникальный номер, используемый майнерами для создания нового блока в блокчейне. Майнеры пробуют разные одноразовые номера, пока не найдут тот, который даст им правильное значение хеш-функции для блока, что доказывает, что они проделали необходимую работу для проверки блока и добавления его в блокчейн.

Квест Нонса: поиск магического числа в гонке блокчейнов

В мире блокчейна, каждый блок имеет уникальную информацию и меры безопасности для предотвращения взлома. Одной из таких мер является Нонс — число, используемое один раз для создания уникального хеша блока-кандидата.

Translate picture

Когда майнер пытается добавить новый блок в блокчейн, ему необходимо найти правильный нонс, который создаст хеш-значение, соответствующее целевому значению, установленному сетью. Это делается путем проверки различных значений нонс и их обработки через хэш-функцией до тех пор, пока не будет найдено правильное значение.



_________________________________________________________________________________________

Помните, что хэш-функции очень чувствительны к любым изменениям вводных данных, а это означает, что даже небольшое изменение вводных данных приведет к совершенно другому результату. Таким образом, используя другое значение нонс, майнеры могут гарантировать, что каждый блок, который они добывают, имеет уникальное значение хеш-функции.

Нонс — это всего лишь один из компонентов заголовка блока, наряду с другой важной информацией, такой как отметка времени и хеш предыдущего блока. После того как вся информация в заголовке блока хешируется, создается хеш-кандидат блока. Майнер, который находит значение хеш-функции, соответствующее целевому значению, установленному сетью, выигрывает гонку и получает возможность добавить блок в блокчейн.

Translate picture

Как мы видим ниже, за блок № 7 «Мой первый биткойн» был вознагражден 1 BTC за расчет правильного хеша блока, необходимого от сети на тот момент (21.01.23). Кроме того, МФБ взимал комиссию с транзакций, включенных в блок. Нонс, который в конечном итоге привел к получению выигрышного хеша, был 354.

Новая транзакция транслируется в блокчейн.
Выбирается количество транзакций.
Блок будет хеширован.
Загадка решена.

ИСТИННЫЙ.
Блок добавляется в цепочку.
Майнер получит свое вознаграждение после нескольких подтверждений.

ЛОЖЬ.
Хешируйте еще раз, пока другой узел не решит головоломку.




_________________________________________________________________________________________

### ***8.4 Перефразирование Хешей – Без Каламбура***    

Сколько времени требуется майнерам, чтобы обнаружить действительный хэш? И как быстро они смогут изменить значения нонса в процессе вычислений?

В приведенном ниже примере, майнеру потребовалось 1619820810 итераций, чтобы найти хэш-значение с необходимым количеством нулей. Майнер, которому удалось найти правильное значение нонса, добавил блок в блокчейн, образуя безопасную и неизменяемую часть цепочки.

Скорость хеширования — это мера вычислительной мощности сети и скорости, с которой майнеры могут выполнять вычисления нонса, которые используются для поиска правильного хеша блока.

Чем большей вычислительной мощностью обладает майнер, тем быстрее он сможет выполнять эти вычисления, что может дать ему преимущество в процессе добычи. Однако по мере увеличения скорости хеширования сети, сложность добычи новых биткойнов также увеличивается, что усложняет поиск правильного хеша блока для всех майнеров.

- Точно так же, как спортсмены модернизируют свое оборудование, чтобы работать быстрее, майнеры биткойнов инвестируют в специализированное компьютерное оборудование, чтобы увеличить скорость хэширования и более эффективно добывать блоки. Чем больше ресурсов они вложат, тем выше их шансы добраться до финиша первыми.

- Скорость хэширования можно сравнить со скоростью бегуна. Чем мощнее машина майнера, тем выше скорость хеширования и тем быстрее он сможет майнить. Однако, как и в гонке, высокая скорость не гарантирует победу, если целевой уровень сложности установлен на более высокий уровень. Майнеры должны постоянно модернизировать свое оборудование и улучшать скорость хэширования, чтобы оставаться впереди конкурентов и иметь шанс добыть блок и выиграть гонку.

Процесс поиска правильного значения хеш-функции путем изменения нонса называется майнингом!




_________________________________________________________________________________________

Когда мы говорим об отдельных майнерах и размере всей сети, мы используем разные префиксы SI, что может сбивать с толку.

Основные обозначения хеша следующие: хэш машин для майнинга биткойнов в Терахаше в секунду (TH/s). Общая скорость хеширования сети описывается в Эксахэше в секунду (EH/s).


Скорость хеширования биткойнов:
1.1 Эксахэш/секунду

Один хеш/секунду.
Один килохеш = 1000 хэшей.
Один мегахеш = 1,000,000 хэшей
Один гигахэш = 1,000,000,000 хэшей
Один терахеш = 1,000,000,000,000 хешей
Один петахэш = 1,000,000,000,000,000 хэшей
Один Эксахаш = 1,000,000,000,000,000,000 хешей


Хеширование блоков биткойнов

Translate picture


Хэш блока можно назвать доказательством работы

Таким образом, каждые десять минут или около того, майнеры вступают в гонку за поиск действительного хеш блока. Они начинают брать все данные из своих блоков-кандидатов (которые аккуратно суммируются в заголовках блоков), дважды хэшируют их в один хеш и сравнивают выводные данные с целевым значением хеш-функции, установленным сетью. Если хэш созданного блока слишком высок, майнер корректирует нонс и пытается снова, повторяя этот процесс триллионы раз в секунду, пока один счастливчик, наконец, не найдет хэш, соответствующий цели сети.

Translate picture

Хеш блока






_________________________________________________________________________________________

Независимо от того, насколько мала или велика хеш-мощность при майнинге, средний блок добывается каждые 10 минут.

- Когда общая скорость хеширования снижается, уровень сложности снижается, чтобы майнерам было легче добывать новые биткойны.
- Это помогает поддерживать стабильную скорость добычи новых биткойнов.

- Корректировка сложности осуществляется с использованием формулы, которая учитывает среднее время, необходимое для добычи блоков предыдущих 2016 блоков.
- Если среднее время добычи 2016 блоков занимает менее 14 дней, уровень сложности увеличивается.
- Если среднее время прохождения 2016 блоков занимает более 14 дней, уровень сложности снижается.

Скорость выпуска относится к скорости, с которой новые монеты добавляются в обращение, часто посредством майнинга. На эту скорость могут влиять различные факторы, в том числе изменения скорости хеширования сети, количества добытых блоков и события сокращения вдвое, которые уменьшают количество монет, которые можно добыть на блок.


### ***8.5 Пошаговый Процесс Майнинга Блока***    

Добыча блока в сети Биткойн включает в себя несколько этапов:

1. Новые транзакции передаются в сеть, подхватываются и проверяются узлами.
2. Транзакции собираются из неподтвержденных транзакций в Мемпуле. Транзакции с более высокими комиссиями имеют приоритет.
3. Эти транзакции затем организуются в дереве Меркла и включаются в блок-кандидат вместе с хэшем предыдущего блока, меткой времени и нонсом.
4. Майнеры соревнуются в решении математической головоломки на основе информации в блоке, включая транзакции и случайное число.
5. Задача состоит в том, чтобы найти определенное число («хэш»), которое в сочетании с данными блока дает значение, меньшее целевого числа.

Другими словами, майнеры используют доказательство работы для корректировки значения нонса до тех пор, пока не будет получен хеш, соответствующий указанным требованиям сложности.





_________________________________________________________________________________________

МАЙНЕРЫ — узлы, работающие над поддержанием и обновлением реестра — собирают все последние данные о транзакциях.

Они группируют все это в БЛОК, чтобы добавить в цепочку.

Затем они вычисляют ХЕШ для этого блока: они пропускают все данные через алгоритм, который выдает уникальную строку. Затем они делают это снова. И опять. Они ищут действительный хэш, начинающийся с длинной строки нулей. Первый майнер, который его найдет, выигрывает вновь созданный биткойн, и его блок добавляется в цепочку.

Этот хеш гарантирует, что никто не подделает реестр. Изменение одной цифры или буквы в любом месте цепочки приведет к тому, что каждый хэш каждого последующего блока будет до неузнаваемости отличаться. При этом, другие узлы отклонят скомпрометированный реестр.

6. Майнер, который первым находит правильный хеш, передает его в сеть, а остальные майнеры проверяют решение, чтобы убедиться, что оно действительно правильное.
7. Если решение проверено, блок добавляется в блокчейн.

Добытый блок передается в сеть для проверки, и как только он будет проверен другими майнерами и в сети достигнут консенсус, блок добавляется в блокчейн в качестве последнего блока в цепочке.





_________________________________________________________________________________________

8. Майнер, успешно добывший блок, вознаграждается вновь добытыми биткойнами в результате транзакции Coinbase и комиссией за включенные транзакции.
9. Новый блок становится частью неизменяемой и прозрачной записи всех транзакций в блокчейне. Хэш блока и информация в нем используются для обновления блокчейна, и процесс начинается снова со следующего блока.


### _8.5.1 Классовое Упражнение: Интерактивное Упражнение по Майнингу_    

Классное упражнение. Следуйте следующим инструкциям:

1. Посетите веб-сайт https://chainflyer.bitflyer.jp/
2. Просмотрите различные элементы, отображаемые на странице, включая последние блоки, подтвержденные транзакции, количество транзакций, использование памяти и приблизительную стоимость всего блока.
- Ответьте на вопросы:
- Какой блок был добыт последним?
- Сколько транзакций было включено в этот блок?
- Какова общая стоимость торгов в биткойнах?
- Каков был размер блока в мегабайтах?
- Со скольких нулей начинается нонс блока?
- Сколько всего заработал майнер?
- Какова была общая сумма комиссий, полученных майнером за добавление транзакций в сеть?
- Выберите одну из транзакций с самой высокой стоимостью в блоке. На сколько кошельков BTC была распределена сумма.






_________________________________________________________________________________________

### _8.5.2 Краткое Описание Транзакции от Начала до Конца_    

1. Пользователь хочет отправить биткойны другому пользователю. Они создают транзакцию с деталями отправки, включая сумму отправляемых биткойнов, адрес отправителя и адрес получателя.
2. Затем пользователь использует свой личный ключ для шифрования транзакции. Этот личный ключ подобен секретному коду, который знает только пользователь, и он используется для доказательства того, что пользователь является тем, кем он себя называет.
3. Зашифрованная транзакция транслируется в сеть узлов Биткойн.

Translate picture

4. Узлы проверяют транзакцию, используя публичный ключ отправителя, который доступен в блокчейне. Они проверяют, что подпись действительна и что у отправителя достаточно биткойнов для завершения транзакции.
5. Затем узлы группируют проверенные транзакции в блок.
6. Затем блок транслируется в сеть майнеров биткойнов.
7. Майнеры используют сложный математический алгоритм для решения головоломки, которая называется «майнинг». Как только головоломка решена, она добавляется в блокчейн, а блок добавляется в цепочку.
8. Как только блок добавляется в блокчейн, транзакция считается завершенной, и получатель может получить доступ к биткойнам, используя свой собственный личный ключ.

Таким образом, отправитель создает и шифрует транзакцию с помощью своего личного ключа, узлы проверяют UTXO транзакции, используя публичный ключ отправителя, а майнеры добавляют проверенную транзакцию в блокчейн. Получатель может затем получить доступ к биткойнам, используя свой личный ключ. После того как блок добыт, все включенные в него транзакции считаются подтвержденными, а UTXO, используемые в качестве вводных данных в этих транзакциях, считаются потраченными и не будут использоваться снова.






_________________________________________________________________________________________

### _8.5.3 Не Доверяй, Проверяй_    

В мире криптовалют фраза «Не доверяй, проверяй» является напоминанием о необходимости всегда проверять транзакции самостоятельно, а не полагаться на других, например, на централизованный орган или посредника. Сеть Биткойн состоит из децентрализованной сети узлов, которая позволяет пользователям самостоятельно проверять транзакции.

Однако существуют сценарии, которые могут привести к отмене транзакций, например двойное расходование, потерянные блоки и реорганизация. Чтобы повысить безопасность транзакций, рекомендуется дождаться 6 подтверждений или 6 блоков, содержащих конкретную транзакцию, прежде чем считать её окончательной. Чем больше подтверждений имеет транзакция, тем более безопасной она становится, поскольку вероятность её отмены снижается. Количество необходимых подтверждений может варьироваться в зависимости от варианта использования и желаемого уровня безопасности.

- Двойное расходование: При атаке двойного расходования, злоумышленник пытается потратить один и тот же биткойн дважды, манипулируя сетью, чтобы принять вторую трату одного и того же биткойна как действительную. Если майнер или группа майнеров, контролирующих более 50% хэш-мощности сети (известная как атака 51%), подтвердят транзакцию двойного расходования, она может быть добавлена в блок и считаться действительной, что фактически отменяет исходную транзакцию.

- Потерянные блоки: когда два майнера одновременно находят новый блок, сеть может временно принять оба. Когда один из блоков позже будет расширен дополнительными блоками, сеть распознает эту цепочку как основную, а другой блок станет сиротой и больше не будет частью основного блокчейна. Транзакции, включенные в потерянный блок, не теряются и будут включены в более поздний блок, если они останутся действительными.

Осиротевший блок в Биткойне — это действительный блок, который не включен в самую длинную цепочку, которая считается основной цепочкой.

- Реорганизация: Теоретически это может произойти, если в блокчейн будет добавлен новый блок, что приведет к замене существующей цепочки другой. Если транзакция была включена в блок, которого больше нет в основной цепочке, она будет считаться недействительной и транзакция будет отменена.

Translate pictures





_________________________________________________________________________________________

### ***8.6 Классное Упражнение: Транзакция с UTXO***    

Классное упражнение. Следуйте следующим инструкциям:

1. Поймите свою роль: вам назначена одна из следующих ролей: отправитель, получатель, узел или майнер.
- Как отправитель, вы будете нести ответственность за создание и трансляцию транзакций.
- Как получатель, вы будете нести ответственность за получение и проверку транзакций.
- Как узел вы будете нести ответственность за проверку транзакций и соблюдение правил.
- Как майнер, вы будете нести ответственность за проверку, добавление транзакций в блокчейн и получение вознаграждений за вашу тяжелую работу.

2. Если вы являетесь отправителем, создайте транзакцию: Чтобы создать транзакцию, выполните следующие действия:
Возьмите форму транзакции и заполните следующие поля:
- Вводной UTXO: 20BTC
- Выводной UTXO: 10BTC на адрес получателя
- Выводной UTXO: 1 BTC на адрес майнера
- Изменить UTXO: 9 BTC на свой адрес
- Подпись: Ваша подпись, имитирующая закрытый ключ.
Передайте форму транзакции и соответствующее количество монет получателю.

3. Если вы являетесь получателем, проверьте транзакции: Выполните следующие действия:
- Проверьте форму транзакции, чтобы убедиться, что указано правильное количество монет и имя или инициалы получателя.
- Подсчитайте полученные вами монеты и сравните их с количеством монет, указанным в форме транзакции.
- Если монеты совпадают, установите флажок одобрения на диаграмме UTXO, которая является общей и доступной для всех в классе.
- Если монеты не совпадают или у вас есть сомнения, отклоните транзакцию и напишите причину на графике UTXO.

4. Если вы являетесь узлом, проверяйте транзакции. Как узел вы несете ответственность за проверку транзакций, проверяя ее действительность путем проверки ее на соответствие правилам протокола и механизма консенсуса.
- Убедитесь, что адрес отправителя действителен, а адрес получателя действителен.
- Убедитесь, что у отправителя достаточно средств для завершения транзакции, проверив, что UTXO, использованный в качестве входных данных в транзакции, действительно существует и не был потрачен ранее, просмотрев график UTXO.
- Посмотрите на график UTXO, чтобы убедиться, что транзакция не тратит монеты дважды.



_________________________________________________________________________________________

5. Если вы майнер, добавьте транзакции в блокчейн: Как майнер, вы несете ответственность за добавление транзакций в блокчейн. Выполните следующие действия:
- Проверьте транзакции, которые были одобрены получателями и проверены узлами.
- Бросьте кубик и сравните числа с числами другого майнера. Майнер с меньшим номером броска (менее 25) добавит транзакцию в блокчейн.
- За ваше время, энергию и усилия вы получите награду… 1 BTC.
- Как только транзакция добавлена в блокчейн, её нельзя изменить или отменить.

6. Следите за балансом своих монет: на протяжении всего занятия отслеживайте баланс своих монет, подсчитывая монеты в своем цифровом кошельке.

7. Обсудите с одноклассниками и учителем ключевые изученные понятия.
