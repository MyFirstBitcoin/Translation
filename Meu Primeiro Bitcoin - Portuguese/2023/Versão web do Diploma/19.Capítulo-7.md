# STILL BEING EDITED

## _Cap√≠tulo #7_

# ***Desvendando os Segredos do Funcionamento Interno do Bitcoin: A Matem√°tica, a Mempool e os UTXOs***

- [**7.0** Colocando a Quest√£o do Gasto Duplo para Descansar: Compreendendo a Solu√ß√£o do Bitcoin](https://github.com/MyFirstBitcoin/Translation/blob/main/Meu%20Primeiro%20Bitcoin%20-%20Portuguese/2023/Vers%C3%A3o%20web%20do%20Diploma/19.Cap%C3%ADtulo-7.md#70-colocando-o-problema-de-duplo-gasto-para-descansar-entendendo-a-solu%C3%A7%C3%A3o-do-colorrgb10460148-bitcoin)    
- [**7.1** Rastreando a Jornada da sua Moeda](https://github.com/MyFirstBitcoin/Translation/blob/main/Meu%20Primeiro%20Bitcoin%20-%20Portuguese/2023/Vers%C3%A3o%20web%20do%20Diploma/19.Cap%C3%ADtulo-7.md#71-rastreando-a-jornada-da-sua-moeda)    
- [**7.2** Seguran√ßa e Sigilo](https://github.com/MyFirstBitcoin/Translation/blob/main/Meu%20Primeiro%20Bitcoin%20-%20Portuguese/2023/Vers%C3%A3o%20web%20do%20Diploma/19.Cap%C3%ADtulo-7.md#72-seguran%C3%A7a-e-sigilo)    
- [**7.3** A ‚ÄúMempool‚Äù ou Pool de Mem√≥ria: Compreendendo o Reservat√≥rio de Transa√ß√µes do Bitcoin](https://github.com/MyFirstBitcoin/Translation/blob/main/Meu%20Primeiro%20Bitcoin%20-%20Portuguese/2023/Vers%C3%A3o%20web%20do%20Diploma/19.Cap%C3%ADtulo-7.md#73-a-mempool-ou-pool-de-mem%C3%B3ria-entendendo-o-tanque-de-espera-das-transa%C3%A7%C3%B5es-do-bitcoin)    
  - [**7.3.1** Exerc√≠cio em Sala: Em Espera: Examinando as Transa√ß√µes N√£o Confirmadas da Rede Bitcoin](https://github.com/MyFirstBitcoin/Translation/blob/main/Meu%20Primeiro%20Bitcoin%20-%20Portuguese/2023/Vers%C3%A3o%20web%20do%20Diploma/19.Cap%C3%ADtulo-7.md#731-exerc%C3%ADcio-em-classe-em-espera-examinando-as-transa%C3%A7%C3%B5es-n%C3%A3o-confirmadas-da-colorrgb10460148-rede--bitcoin)    
- [**7.4** Por Tr√°s dos Blocos: O Mist√©rio da Programa√ß√£o do Bitcoin](https://github.com/MyFirstBitcoin/Translation/blob/main/Meu%20Primeiro%20Bitcoin%20-%20Portuguese/2023/Vers%C3%A3o%20web%20do%20Diploma/19.Cap%C3%ADtulo-7.md#74-por-tr%C3%A1s-dos-blocos-o-mist%C3%A9rio-do-scripting-do-colorrgb10460148-bitcoin)    
  - [**7.4.1** Uma Explora√ß√£o T√©cnica das Transa√ß√µes do Bitcoin](https://github.com/MyFirstBitcoin/Translation/blob/main/Meu%20Primeiro%20Bitcoin%20-%20Portuguese/2023/Vers%C3%A3o%20web%20do%20Diploma/19.Cap%C3%ADtulo-7.md#741-uma-imers%C3%A3o-t%C3%A9cnica-nas-transa%C3%A7%C3%B5es-do-colorrgb10460148-bitcoin)    



_______________________________________________________________________________________

**0000110011100010100010101010101110010001010100100110011000001110100010100011111001101011110010011011000110010111001001101010011100010100100110110111010001100101101010001101100000101110101000100011110000000011101011011111000010101100111100101010000101000011**

Voc√™ v√™ aquela longa sequ√™ncia de uns e zeros l√° em cima? Isso √© chamado de n√∫mero aleat√≥rio e, se o convertermos para o nosso sistema decimal regular, ele se torna um n√∫mero com mais de 70 d√≠gitos, o que √© ainda mais √°tomos do que existem em nosso universo! Mas podemos usar um sistema diferente para representar esse n√∫mero de forma mais curta, e chamamos de **$\color[RGB]{240,43,43} chave \ privada$**.

Algo realmente legal sobre esta **$\color[RGB]{240,43,43} chave \ privada$** em particular √© que ela √© √∫nica, o que significa que nunca foi usada antes e nunca aparecer√° novamente uma vez que voc√™ saia desta p√°gina ou gere uma nova. √â como jogar 256 moedas seguidas e obter o mesmo resultado duas vezes - imposs√≠vel!

A seguran√ßa do **$\color[RGB]{104,60,148} Bitcoin$** depende dessa **$\color[RGB]{240,43,43} chave \ privada$** ser privada e dif√≠cil de ser adivinhada. Se outra pessoa colocar as m√£os nela, ou se voc√™ a perder, perder√° todo o seu dinheiro para sempre. Ent√£o, mantenha-a em seguran√ßa!

IMAGE

At√© agora, aprendemos sobre a hist√≥ria do dinheiro e a ideia revolucion√°ria da tecnologia **$\color[RGB]{69,90,169} blockchain$**, e exploramos os conceitos b√°sicos do **$\color[RGB]{104,60,148} Bitcoin$** - a primeira moeda digital descentralizada do mundo. Mas como o **$\color[RGB]{104,60,148} Bitcoin$** evita fraudes e garante que as pessoas n√£o possam **gastar o mesmo dinheiro duas vezes?**

A verdade √© que, quando voc√™ envia alguns **$\color[RGB]{247,148,31} bitcoins$** para outra pessoa, voc√™ precisa dizer ‚Äúsim, eu aprovo isso‚Äù com sua **$\color[RGB]{240,43,43} chave \ privada$**. Em seguida, a rede verifica se est√° tudo certo e confirma que a transa√ß√£o √© leg√≠tima antes de enviar os **$\color[RGB]{247,148,31} bitcoins$**.

IMAGE


_______________________________________________________________________________________

√â a√≠ que a magia dos **UTXOs, criptografia de chave p√∫blica, hashing, scripting**, e o **mempool** entram em jogo. Assim como uma impress√£o digital garante que ningu√©m mais possa usar sua identidade, os **hashes** no **$\color[RGB]{104,60,148} Bitcoin$** garantem que as transa√ß√µes n√£o possam ser alteradas. Os **Scripts** s√£o como as regras de um jogo, garantindo que as transa√ß√µes sigam condi√ß√µes espec√≠ficas. Os **UTXOs** s√£o como os blocos de constru√ß√£o de um quebra-cabe√ßa, mantendo o controle de todo o dinheiro em sua carteira virtual. E o **mempool** funciona como uma √°rea de espera, garantindo que todas as transa√ß√µes sejam verificadas antes de serem adicionadas ao **$\color[RGB]{69,90,169} blockchain$**. Ent√£o, vamos mergulhar e descobrir como o **$\color[RGB]{104,60,148} Bitcoin$** resolve o **problema de gasto duplo** e garante a integridade de cada transa√ß√£o em sua rede.

<br/>

### ***7.0 Colocando o Problema de Duplo Gasto para Descansar: Entendendo a Solu√ß√£o do*** **$\color[RGB]{104,60,148} Bitcoin$**    

***Lembre-me, qual √© o ‚Äúproblema de gasto duplo‚Äù?***

**$\color[RGB]{240,43,43} As \ chaves \ privadas$**, **$\color[RGB]{3,130,3} p√∫blicas$** e as transa√ß√µes de **$\color[RGB]{247,148,31} bitcoin$**, como j√° vimos, s√£o representadas por uma s√©rie de n√∫meros e letras aleat√≥rios que podem ser visualizados em qualquer dispositivo com acesso √† internet.

- üí° Al√©m disso, grande parte das informa√ß√µes relacionadas a essas transa√ß√µes √© normalmente comunicada usando um sistema de nota√ß√£o num√©rica conhecido como **n√∫meros hexadecimais**.

IMAGE

Isso significa que √© comum ver sequ√™ncias de n√∫meros hexadecimais de 64 caracteres, compostas por letras (A-F) e n√∫meros (0-9), como:

f4184fc596403b9d638783cf57adfe4c75c605f6356fbc91338530e9831e9e16

Ent√£o, como realmente impedimos algu√©m de copiar e colar seu bitcoin e gast√°-lo v√°rias vezes, como eles fariam com um e-mail ou foto?

f4184fc596403b9d638783cf57adfe4c75c605f6356fbc91338530e9831e9e16.
f4184fc596403b9d638783cf57adfe4c75c605f6356fbc91338530e9831e9e16.

Como chegamos a um consenso sobre quem possui qual dinheiro sem uma autoridade central?

**Hashing** e c√≥digo. Vamos explicar.


_______________________________________________________________________________________

Imagine que voc√™ tem 1 **$\color[RGB]{247,148,31} bitcoin$** e quer envi√°-lo como presente de anivers√°rio para seu amigo. Voc√™ envia o **$\color[RGB]{247,148,31} bitcoin$** para o **endere√ßo**, do seu amigo, mas ent√£o percebe que deve dinheiro ao seu ex-namorado e deveria ter enviado o **$\color[RGB]{247,148,31} bitcoin$** para ele em vez disso. Em um momento de p√¢nico, voc√™ decide ser esperto(a) e criar uma nova transa√ß√£o para enviar o mesmo 1 **$\color[RGB]{247,148,31} bitcoin$** para o seu ex-namorado. Isso √© o que chamamos de **‚Äúdouble spend‚Äù (gasto duplo)**.

Mas espere, como a rede impede que isso aconte√ßa? √â simples. Os n√≥s na rede detectam transa√ß√µes conflitantes e permitem apenas que uma delas seja confirmada com base em um conjunto de regras conhecidas como ‚Äúregras de consenso‚Äù. Nesse caso, √© prov√°vel que a transa√ß√£o para o seu ex-namorado seja rejeitada, pois foi enviada ap√≥s a transa√ß√£o original para seu amigo. No entanto, √© apenas uma quest√£o de sorte qual transa√ß√£o √© escolhida primeiro por um minerador.

Gra√ßas √† **$\color[RGB]{69,90,169} blockchain$**, **todos na rede conseguem concordar com o estado atual do livro-raz√£o**. Isso ajuda a evitar o **double-spending** e a fraude, tornando-o um sistema seguro e confi√°vel, assim como uma vers√£o digital do ‚Äúsistema de honra‚Äù. Ent√£o, da pr√≥xima vez que voc√™ enviar **$\color[RGB]{247,148,31} bitcoin$**, pode relaxar sabendo que a rede est√° te protegendo.

Ent√£o, como o **$\color[RGB]{104,60,148} Bitcoin$** realmente resolve isso? Bem, vamos descobrir.

- O **$\color[RGB]{104,60,148} Bitcoin$** evita o double spending ao implementar um mecanismo de confirma√ß√£o e manter um livro-raz√£o universal (**$\color[RGB]{69,90,169} blockchain$**).

  - As transa√ß√µes s√£o adicionadas √† **$\color[RGB]{69,90,169} blockchain$** de forma cronologicamente ordenada e com registro de data e hora.

  - Para evitar o double spending, apenas a primeira transa√ß√£o a receber confirma√ß√µes suficientes (geralmente 6) √© inclu√≠da na **$\color[RGB]{69,90,169} blockchain$**, enquanto as outras s√£o descartadas.

  - As transa√ß√µes na **$\color[RGB]{69,90,169} blockchain$** s√£o irrevers√≠veis e imposs√≠veis de serem alteradas.

IMAGE



_______________________________________________________________________________________

Quando qualquer transa√ß√£o √© iniciada, qualquer **n√≥** pode verific√°-la na rede em alguns passos simples:

1. Primeiro, o n√≥ **verificar√° se a transa√ß√£o est√° corretamente** **$\color[RGB]{0,174,239} assinada$** **pela** chave privada **do remetente**, o que garante que a transa√ß√£o seja leg√≠tima e n√£o tenha sido adulterada.

2. Em seguida, o n√≥ **verificar√° se o remetente possui** **$\color[RGB]{247,148,31} fundos$** **suficientes** para concluir a transa√ß√£o. Isso √© feito examinando o saldo do remetente no livro-raz√£o da **$\color[RGB]{69,90,169} blockchain$**.

3. Por fim, o n√≥ tamb√©m validar√° as **entradas** e **sa√≠das** da transa√ß√£o, verificando se as entradas gastas na transa√ß√£o n√£o foram gastas em outra transa√ß√£o e se as sa√≠das n√£o excedem o fornecimento total.

Como veremos, a combina√ß√£o de **criptografia de chave p√∫blica** e o sistema **UTXO** (Unspent Transaction Output) s√£o usados no **$\color[RGB]{104,60,148} Bitcoin$** para verificar a autenticidade das transa√ß√µes e prevenir fraudes sem uma autoridade central. A **criptografia de chave p√∫blica** garante comunica√ß√£o segura e transfer√™ncias de fundos, enquanto o UTXO mant√©m um registro de todos os fundos na rede e previne gastos duplos.

- üí° **UTXO**, que significa ‚ÄúUnspent Transaction Output‚Äù (Sa√≠da de Transa√ß√£o N√£o Gasta), √© simplesmente um registro de todos os fundos dispon√≠veis na rede que ainda n√£o foram gastos.

<br/>

### ***7.1 Rastreando a Jornada da sua Moeda***    

No **$\color[RGB]{104,60,148} Bitcoin$**, as transa√ß√µes funcionam como dividir uma nota grande em notas menores e entreg√°las a pessoas diferentes. O troco que voc√™ recebe de uma transa√ß√£o √© chamado de sa√≠da n√£o gasta e pode ser usado como entrada para uma nova transa√ß√£o. As sa√≠das nas transa√ß√µes do **$\color[RGB]{104,60,148} Bitcoin$** podem estar **gastas** ou **n√£o gastas**, e as sa√≠das n√£o gastas s√£o consideradas valiosas porque podem ser usadas em novas transa√ß√µes.

- Pense nisso como usar v√°rios cart√µes-presente para pagar uma compra. Os cart√µes-presente de transa√ß√µes anteriores atuam como entradas, e o troco que voc√™ recebe √© representado por um novo cart√£o-presente com o valor restante. Isso √© semelhante √† forma como as transa√ß√µes do **$\color[RGB]{104,60,148} Bitcoin$** funcionam com UTXOs.

***O que s√£o UTXOs?***

O saldo de uma carteira √© a soma de todos os UTXOs de um usu√°rio. Os UTXOs s√£o usados para rastrear a propriedade do **$\color[RGB]{247,148,31} bitcoin$** na rede. Quando uma transa√ß√£o √© feita, ela cria novos UTXOs, e quando uma transa√ß√£o √© gasta, ela consome os UTXOs existentes.

- Os UTXOs s√£o como moedas digitais no mundo do **$\color[RGB]{104,60,148} Bitcoin$**. √â o troco que voc√™ recebe depois de gastar alguns **$\color[RGB]{247,148,31} bitcoins$**.



_______________________________________________________________________________________

IMAGE


***Como funcionam os UTXOs nas transa√ß√µes de Bitcoin***

Quando uma transa√ß√£o √© feita, a quantidade de **$\color[RGB]{247,148,31} bitcoin$** que √© enviada √© dividida em v√°rias sa√≠das, cada uma associada a um endere√ßo espec√≠fico.

- Ao enviar **$\color[RGB]{247,148,31} bitcoin$** para algu√©m, voc√™ usar√° uma ou mais Unspent Transaction Outputs (UTXOs) como fonte dos fundos. Esses UTXOs ser√£o combinados, se necess√°rio, para criar uma nova sa√≠da que perten√ßa ao destinat√°rio da transa√ß√£o. Essa nova sa√≠da, ou UTXO, ent√£o se torna propriedade do destinat√°rio e pode ser usada como fonte de fundos em uma transa√ß√£o futura. Essa cadeia de UTXOs cria um hist√≥rico transparente e rastre√°vel de todas as transa√ß√µes de **$\color[RGB]{247,148,31} bitcoin$** na **$\color[RGB]{69,90,169} blockchain$**, a partir do primeiro bloco.

IMAGE

- Por exemplo, se algu√©m quer enviar 2 **$\color[RGB]{247,148,31} bitcoins$**, mas tem um UTXO no valor de 5 **$\color[RGB]{247,148,31} bitcoins$**, a diferen√ßa de 3 **$\color[RGB]{247,148,31} bitcoins$** √© enviada de volta para o remetente como ‚Äútroco‚Äù. Esse troco √© um novo UTXO para o remetente e pode ser gasto em uma transa√ß√£o futura.

- No exemplo, Alice envia 5 BTC para Bob, mantendo uma parte para si mesma. Ela combina 6 **$\color[RGB]{247,148,31} bitcoins$** de seus quatro UTXOs, totalizando 23 **$\color[RGB]{247,148,31} bitcoins$**, e envia 5 para Bob e 0,99 de volta para si mesma, com uma taxa de 0,01 para processamento. A transa√ß√£o √© ent√£o adicionada √† **$\color[RGB]{69,90,169} blockchain$**, atualizando todos os n√≥s com uma c√≥pia do registro de UTXO atualizado. Se Alice tentar enviar 23 BTC para Ximena em uma transa√ß√£o separada, os n√≥s ir√£o rejeit√°-la, pois parte da sa√≠da j√° foi gasta.

Se algu√©m tentasse usar uma sa√≠da de transa√ß√£o j√° gasta em sua transa√ß√£o, √© prov√°vel que seja rejeitada pelos n√≥s da rede. Isso ocorre porque esses n√≥s mant√™m uma c√≥pia do mesmo conjunto de banco de dados e podem facilmente chegar a um consenso verificando o saldo de cada endere√ßo antes de validar qualquer nova transa√ß√£o. Isso garante a integridade e validade das transa√ß√µes na rede.


_______________________________________________________________________________________

Vamos dar uma olhada em outro exemplo:

Apenas a pessoa que possui a **$\color[RGB]{240,43,43} chaves \ privada$** de um **endere√ßo** pode acessar os UTXOs armazenados nesse endere√ßo. Por exemplo, se a Evelyn possui a **$\color[RGB]{240,43,43} chaves \ privada$** para o **endere√ßo** #1, ela ver√° 0.5 **$\color[RGB]{247,148,31} bitcoin$** em sua carteira. Se o Salo possui a **$\color[RGB]{240,43,43} chaves \ privada$** para o **endere√ßo** #2, ele ver√° 2.3 **$\color[RGB]{247,148,31} bitcoin$** em sua carteira.

Quando Evelyn envia 0.3 **$\color[RGB]{247,148,31} bitcoin$** para o Salo, sua carteira gera uma nova **$\color[RGB]{240,43,43} chaves \ privada$** e endere√ßo (#3). O UTXO original no **endere√ßo** #1 √© gasto e dois novos UTXOs s√£o criados: um para o **endere√ßo** do Salo com 0.3 **$\color[RGB]{247,148,31} bitcoin$** e outro para o novo endere√ßo da Evelyn com 0.2 **$\color[RGB]{247,148,31} bitcoin$**. Ap√≥s essa transa√ß√£o ser registrada no livro-raz√£o, a carteira do Salo mostra 2,6 **$\color[RGB]{247,148,31} bitcoin$** e a carteira da Evelyn mostra 0.2 **$\color[RGB]{247,148,31} bitcoin$**.

IMAGE

Abaixo est√° uma captura de tela real de uma transa√ß√£o em que h√° apenas uma entrada. No entanto, em um caso mais geral, o saldo inicial pode ser a soma de v√°rios UTXOs que uma pessoa acumulou de transa√ß√µes anteriores.

Quais observa√ß√µes podem ser feitas? Os inputs correspondem aos outputs? √â poss√≠vel descrever os detalhes da transa√ß√£o? Existe alguma conex√£o entre as duas capturas de tela? E qual transa√ß√£o ocorreu primeiro?

IMAGE


_______________________________________________________________________________________

IMAGE

Geralmente, as **$\color[RGB]{240,43,43} sa√≠das \ gastas$** s√£o exibidas em vermelho e as **$\color[RGB]{3,130,3} sa√≠das \ n√£o \ gastas$** em verde. Essa codifica√ß√£o de cores fornece uma maneira visual de identificar rapidamente sa√≠das gastas e n√£o gastas, o que pode ser √∫til para rastrear transa√ß√µes e entender o fluxo de fundos em uma blockchain.

<br/>

### ***7.2 Seguran√ßa e Sigilo***    

Por favor, n√£o se intimide com os termos t√©cnicos e conceitos matem√°ticos a seguir. Entendemos que nem todos s√£o aficionados por matem√°tica, mas voc√™ pode se surpreender e perceber que at√© mesmo as ideias mais complexas podem ser compreendidas com um pouco de esfor√ßo.

***O que √© uma fun√ß√£o, mais especificamente, o que √© uma fun√ß√£o unidirecional?***

- üí° Uma **fun√ß√£o** √© como uma m√°quina que recebe algumas informa√ß√µes e as transforma em algo novo. As informa√ß√µes que voc√™ fornece √† fun√ß√£o s√£o chamadas de **$\color[RGB]{240,43,43} entrada$**. As novas informa√ß√µes criadas pela fun√ß√£o s√£o chamadas de **$\color[RGB]{3,130,3} sa√≠da$**. As fun√ß√µes ajudam os computadores a realizar tarefas e resolver problemas.

IMAGE

Pense nisso como uma receita para fazer uma salada. A receita (ou fun√ß√£o) diz quais ingredientes usar e como mistur√°-los para fazer a salada. Voc√™ pode colocar ingredientes diferentes, mas a receita sempre resultar√° na salada como sa√≠da. As fun√ß√µes podem ser usadas para facilitar e tornar as coisas mais eficientes.

IMAGE

Essa [receita](), portanto, √© uma **[fun√ß√£o]()** que recebe os **ingredientes** como **$\color[RGB]{240,43,43} entrada$** e gera a **salada mista** como **$\color[RGB]{3,130,3} sa√≠da$**.


_______________________________________________________________________________________

No **$\color[RGB]{104,60,148} Bitcoin$**, **fun√ß√µes** s√£o utilizadas para **executar transa√ß√µes**. J√° sabemos que as transa√ß√µes no **$\color[RGB]{104,60,148} Bitcoin$** s√£o essencialmente transfer√™ncias de valor de um endere√ßo para outro. Para realizar uma transa√ß√£o, v√°rias fun√ß√µes criptogr√°ficas s√£o utilizadas para validar a transa√ß√£o e atualizar o estado da blockchain do **$\color[RGB]{104,60,148} Bitcoin$**, que √© um livro-raz√£o descentralizado que registra todas as transa√ß√µes.

As fun√ß√µes usadas em uma transa√ß√£o de **$\color[RGB]{104,60,148} Bitcoin$** incluem verificar a autenticidade das entradas da transa√ß√£o, verificar se o remetente possui fundos suficientes e atualizar os saldos dos endere√ßos relevantes. Uma vez que uma transa√ß√£o √© verificada e adicionada √† blockchain, ela se torna parte do registro permanente de todas as transa√ß√µes na rede.

- Uma **fun√ß√£o unidirecional** utiliza um conjunto de instru√ß√µes para processar as informa√ß√µes e transform√°-las em algo **novo**, assim como uma receita de smoothie transforma ingredientes em uma nova bebida. No entanto, assim como **n√£o √© poss√≠vel desfazer a mistura de um smoothie** para obter os ingredientes originais de volta, **n√£o √© poss√≠vel reverter uma fun√ß√£o unidirecional para recuperar as informa√ß√µes originais**.

IMAGE

**A criptogra ia de chave p√∫blica**, da qual a **$\color[RGB]{3,130,3} chave \ p√∫blica$** √© uma parte, depende do uso de **$\color[RGB]{3,130,3} fun√ß√µes \ unidirecionais$**, o que torna dif√≠cil determinar a **$\color[RGB]{240,43,43} chave \ privada$** a partir da **$\color[RGB]{3,130,3} chave \ p√∫blica$**. N√£o √© exatamente ‚Äúimposs√≠vel‚Äù encontrar a chave privada a partir da **$\color[RGB]{3,130,3} chave \ p√∫blica$**, mas √© extremamente dif√≠cil faz√™-lo e demandaria uma quantidade desproporcional de tempo e poder computacional para realizar essa tarefa.

- Encontrar uma **$\color[RGB]{240,43,43} chave \ privada$** a partir de uma **$\color[RGB]{3,130,3} chave \ p√∫blica$** no **$\color[RGB]{104,60,148} Bitcoin$** √© como tentar encontrar uma agulha em um palheiro do tamanho de um campo de futebol. A agulha representa a **$\color[RGB]{240,43,43} chave \ privada$** e o palheiro representa todas as poss√≠veis **$\color[RGB]{240,43,43} chave \ privadas$**.

Da mesma forma, as fun√ß√µes unidirecionais s√£o projetadas para serem irrevers√≠veis e n√£o podem ser descriptografadas.

***O que √© uma fun√ß√£o de hash?***

- üí° O **Hashing** √© como uma impress√£o digital para dados digitais. √â um processo de pegar uma mensagem digital e transform√°-la em um c√≥digo de comprimento fixo, que serve como um identificador √∫nico.

Assim como uma impress√£o digital pode identificar uma pessoa, um hash pode identificar uma mensagem digital. Hashes s√£o usados em muitas aplica√ß√µes, incluindo transa√ß√µes em **$\color[RGB]{104,60,148} Bitcoin$**.


_______________________________________________________________________________________

***Como o Hashing √© usado em transa√ß√µes de Bitcoin***

No **$\color[RGB]{104,60,148} Bitcoin$**, cada transa√ß√£o √© hashada antes de ser adicionada √† **$\color[RGB]{69,90,169} blockchain$**. O hash atua como uma assinatura para a transa√ß√£o, verificando se a transa√ß√£o √© v√°lida e n√£o foi adulterada. Se algu√©m tentar alterar at√© mesmo uma √∫nica letra na transa√ß√£o, o hash ser√° completamente diferente, alertando outros sobre a altera√ß√£o.

<br/>

***O papel do Hashing em fornecer seguran√ßa***

O Hashing √© essencial para a seguran√ßa da **$\color[RGB]{104,60,148} Rede \ Bitcoin$**. Ao usar hashes para identificar transa√ß√µes, a rede pode detectar qualquer tentativa de alterar ou manipular uma transa√ß√£o. Isso ajuda a prevenir fraudes e garantir que todas as transa√ß√µes sejam registradas corretamente na **$\color[RGB]{69,90,169} blockchain$**.

Uma fun√ß√£o de hash √© um tipo de **fun√ß√£o unidirecional** que recebe uma **$\color[RGB]{240,43,43} entrada$** (referida como ‚Äúmensagem‚Äù ou ‚Äúdados‚Äù) e a converte em uma representa√ß√£o num√©rica chamada ‚Äú**$\color[RGB]{3,130,3} hash$**‚Äù. O hash de **$\color[RGB]{3,130,3} sa√≠da$** √© √∫nico para os dados de **$\color[RGB]{240,43,43} entrada$**, ent√£o mesmo uma pequena altera√ß√£o nos dados de entrada resulta em um hash completamente diferente.

IMAGE

- üí° Uma **fun√ß√£o de hash** √© como uma m√°quina de c√≥digo secreto. Ela recebe uma **$\color[RGB]{240,43,43} mensagem$** e a transforma em um c√≥digo.

- O c√≥digo sempre parece o mesmo para a mesma mensagem. Se voc√™ alterar a mensagem mesmo que seja um pouco, o c√≥digo ser√° completamente diferente. Isso ajuda os computadores a lembrarem as coisas e verificar se algo foi alterado.

IMAGE


_______________________________________________________________________________________

IMAGE


A **$\color[RGB]{3,130,3} sa√≠da$**, ou **$\color[RGB]{3,130,3} hash$**, tem sempre o mesmo comprimento, n√£o importa qu√£o longa seja a informa√ß√£o original.

O **$\color[RGB]{104,60,148} Bitcoin$** utiliza alguns tipos espec√≠ficos de **fun√ß√£o** de hash chamados **SHA-256 e RIPEMD160**. Seguem abaixo alguns exemplos:

- Observe que um ponto no segundo input altera completamente a sa√≠da em compara√ß√£o com o primeiro.
- O terceiro input √© um arquivo enorme, mas a sa√≠da ainda tem o mesmo comprimento fixo que os outros dois.

IMAGE


O **hashing** tamb√©m pode ser comparado a uma partitura musical que captura a ess√™ncia de uma pe√ßa de m√∫sica. Assim como uma partitura musical √© uma representa√ß√£o √∫nica de uma melodia, um valor de hash √© uma representa√ß√£o √∫nica de um conjunto de dados. Ao comparar a partitura de uma pe√ßa musical com a performance real, um m√∫sico pode determinar se a performance √© precisa. Da mesma forma, ao comparar o valor de hash dos dados recebidos com o valor de hash original, pode-se determinar se os dados foram alterados durante a transmiss√£o.

IMAGE


_______________________________________________________________________________________

- Assim como uma leve varia√ß√£o em uma performance musical pode fazer com que ela soe diferente, mesmo a menor altera√ß√£o nos dados originais resultar√° em um valor de hash diferente. Isso torna o hashing uma ferramenta poderosa para garantir a integridade e autenticidade das informa√ß√µes digitais.

O processo de codificar a **$\color[RGB]{3,130,3} chave \ p√∫blica$** por meio do hashing √© usado para melhorar a seguran√ßa das informa√ß√µes, convertendoas em um formato fixo e ileg√≠vel. O Bitcoin utiliza os algoritmos SHA-256 e Ripemd-160 para produzir **endere√ßos p√∫blicos**. A sa√≠da resultante serve como um identificador √∫nico para a **$\color[RGB]{3,130,3} chave \ p√∫blica$** e ajuda a garantir a integridade e seguran√ßa das transa√ß√µes armazenadas na **$\color[RGB]{69,90,169} blockchain$**. Ao **codificar* as informa√ß√µes dessa maneira, torna-se mais dif√≠cil para indiv√≠duos n√£o autorizados acessarem e manipularem os dados.

IMAGE

IMAGE



_______________________________________________________________________________________

### ***7.3 A ‚ÄúMempool‚Äù ou Pool de Mem√≥ria: Entendendo o Tanque de Espera das Transa√ß√µes do Bitcoin***    

***O que √© o Mempool?***

O **mempool** √© como uma sala de espera para transa√ß√µes na **$\color[RGB]{104,60,148} Rede \ Bitcoin$**. Quando uma transa√ß√£o √© feita, ela √© primeiro adicionada ao mempool de um n√≥ antes de ser verificada e adicionada √† **$\color[RGB]{69,90,169} blockchain$**.

IMAGE

Quando um n√≥ recebe uma transa√ß√£o de um outro n√≥, ele precisa verificar se a transa√ß√£o √© leg√≠tima. Ningu√©m quer transa√ß√µes defeituosas ou enganosas.

- üí° A **sincroniza√ß√£o do mempool** permite que os n√≥s compartilhem suas transa√ß√µes com outros n√≥s, enviando uma mensagem contendo uma lista de transa√ß√µes **verificadas** no mempool.

IMAGE


O principal objetivo de um **mempool** √©:

IMAGE

**$\color[RGB]{247,148,31} O \ processo \ de \ ‚ÄúAccept \ To \ Memory \ Pool‚Äù \ (ATMP)$** envolve a verifica√ß√£o de coisas como:

- J√° possuo essa transa√ß√£o?
- Existe algum conflito com outra transa√ß√£o no mempool?
- Os **$\color[RGB]{247,148,31} bitcoins$** recebidos s√£o suficientes para cobrir os **$\color[RGB]{247,148,31} bitcoins$** enviados?
- As assinaturas provam que as sa√≠das anteriores podem ser gastas?
- H√° taxas suficientes anexadas √† transa√ß√£o?




_______________________________________________________________________________________

***Como as Transa√ß√µes S√£o Verificadas e Adicionadas ao Mempool***

Um **n√≥ completo** verifica todas as transa√ß√µes para garantir que sejam v√°lidas e n√£o tenham sido usadas anteriormente. Se uma transa√ß√£o for v√°lida, o n√≥ a verifica e a adiciona ao seu mempool de mem√≥ria. Em seguida, ele a compartilha com outros n√≥s para uma verifica√ß√£o dupla. Por fim, se a maioria concordar, a transa√ß√£o ser√° removida do mempool de todos para se tornar uma parte permanente da **$\color[RGB]{69,90,169} blockchain$**.

As transa√ß√µes na **$\color[RGB]{104,60,148} Rede \ Bitcoin$** s√£o retiradas do mempool e confirmadas quando s√£o inclu√≠das em um bloco, que √© ent√£o adicionado √† **$\color[RGB]{69,90,169} blockchain$**. No entanto, existem v√°rias raz√µes pelas quais uma transa√ß√£o pode n√£o ser confirmada ap√≥s 72 horas:

1. **Baixa taxa:** Transa√ß√µes com uma taxa baixa podem n√£o ser processadas rapidamente, pois os mineradores t√™m mais probabilidade de escolher transa√ß√µes com taxas mais altas para incluir em seus blocos.
2. **Congestionamento da rede:** Se a rede estiver congestionada, pode haver um atraso na confirma√ß√£o das transa√ß√µes, mesmo que tenham uma taxa alta.
3. **Tentativa de gasto duplo:** Se um agente malicioso tentar gastar duas vezes, sua transa√ß√£o pode ser rejeitada pela rede.
4. **Dados incorretos ou incompletos:** Se uma transa√ß√£o contiver dados incorretos ou incompletos, ela pode ser rejeitada pela rede.
5. **Transa√ß√£o malformada:** Se uma transa√ß√£o estiver malformada, ela pode ser rejeitada pela rede.

Para evitar que as transa√ß√µes sejam rejeitadas, √© recomendado incluir uma taxa alta o suficiente para garantir que a transa√ß√£o seja processada de forma oportuna, e verificar novamente se todos os dados da transa√ß√£o est√£o corretos antes de envi√°-la.

- üí° Um ataque **DDoS** (Distributed Denial of Service) √© uma tentativa de tornar a rede indispon√≠vel para os usu√°rios, sobrecarregando-a com um tr√°fego excessivo vindo de m√∫ltiplas fontes. Esse ataque tem como objetivo perturbar o tr√°fego normal de um site ou servi√ßo, sobrecarregando-o com tr√°fego falso, tornando dif√≠cil ou imposs√≠vel para usu√°rios reais acess√°-lo.

<br/>

### _7.3.1 Exerc√≠cio em Classe: Em Espera: Examinando as Transa√ß√µes N√£o Confirmadas da_ **$\color[RGB]{104,60,148} Rede \ Bitcoin.$**    

IMAGE



_______________________________________________________________________________________

1. Visite o website https://bits.monospace.live/

2. Localize uma transa√ß√£o n√£o confirmada e clique nela.
  - Que informa√ß√µes voc√™ pode encontrar?
  - Quantos endere√ßos voc√™ v√™? O que significa entrada (input) e sa√≠da (output)?
  - Quantos endere√ßos voc√™ v√™? O que significa entrada (input) e sa√≠da (output)?
  - √â poss√≠vel acompanhar as UTXOs? Voc√™ consegue identificar quais BTCs foram gastos?
  - A entrada corresponde √† sa√≠da?
  - Toda transa√ß√£o tem uma taxa?
  - Para quem vai a taxa? √â justa?
  - Quem paga a taxa?
  - √â poss√≠vel identificar a quantidade de bitcoins transferidos de um endere√ßo para outro?

3. Anote o TxID, taxa de transa√ß√£o, taxa e valor total da transa√ß√£o em um caderno.

4. Analise outras transa√ß√µes, se desejar, e compare-as com a primeira em termos de valor, taxa paga e probabilidade de ser inclu√≠da no pr√≥ximo bloco.

5. Considere o que significa para um bloco ser ‚Äúminerado‚Äù e para uma transa√ß√£o ser ‚Äún√£o confirmada‚Äù.

6. Esteja preparado para discutir essas observa√ß√µes e perguntas na pr√≥xima aula.

<br/>

### ***7.4 Por Tr√°s dos Blocos: O Mist√©rio do Scripting do*** **$\color[RGB]{104,60,148} Bitcoin$**    

O **Script** √© uma **linguagem de programa√ß√£o** usada no **$\color[RGB]{104,60,148} Bitcoin$** para criar **contratos inteligentes** e **automatizar** transa√ß√µes. Para entender o script, √© √∫til pensar nele como um conjunto de instru√ß√µes que dizem √† **$\color[RGB]{104,60,148} Rede \ Bitcoin$** o que fazer com uma transa√ß√£o espec√≠fica.

- üí° Um **contrato inteligente** √© um contrato autoexecut√°vel em que os termos do acordo entre comprador e vendedor s√£o escritos diretamente em linhas de c√≥digo. O c√≥digo e os acordos contidos nele existem em uma rede blockchain e s√£o aplicados automaticamente.

- Pense nisso como uma m√°quina de venda autom√°tica. Voc√™ coloca dinheiro, faz uma sele√ß√£o e a m√°quina dispensa o item automaticamente. Da mesma forma, um contrato inteligente executa automaticamente os termos do acordo entre duas partes, sem a necessidade de intermedi√°rios como advogados ou bancos.

Por exemplo, um contrato inteligente poderia ser usado para representar um acordo financeiro, como um empr√©stimo ou um t√≠tulo. Os termos do acordo, como a taxa de juros e o cronograma de pagamento, s√£o codificados no contrato. Quando as condi√ß√µes acordadas s√£o atendidas, o contrato executa automaticamente os termos e transfere os fundos.



_______________________________________________________________________________________

Os principais benef√≠cios dos contratos inteligentes s√£o que eles s√£o transparentes, seguros e autoexecut√°veis, o que pode ajudar a reduzir os custos e riscos associados aos processos contratuais tradicionais. Al√©m disso, por existirem em uma rede descentralizada, eles s√£o resistentes a adultera√ß√µes ou interfer√™ncias, tornando-os uma forma mais segura e confi√°vel de realizar transa√ß√µes.

De maneira semelhante, o **$\color[RGB]{104,60,148} Bitcoin$** utiliza o script para garantir que condi√ß√µes espec√≠ficas sejam atendidas antes que uma transa√ß√£o seja processada.

Enquanto outras redes **$\color[RGB]{69,90,169} blockchain$**, como o Ethereum, tamb√©m suportam contratos inteligentes e transa√ß√µes program√°veis, elas utilizam linguagens de programa√ß√£o e abordagens diferentes para impor as regras e condi√ß√µes das transa√ß√µes. Apenas o Bitcoin utiliza o script.

O script √© uma linguagem de programa√ß√£o muito b√°sica, mas √© poderosa o suficiente para lidar com uma ampla variedade de transa√ß√µes. Por exemplo, ele pode ser usado para criar transa√ß√µes **multiassinadas**, onde v√°rias pessoas devem aprovar uma transa√ß√£o antes que ela possa ser processada, ou para criar um contrato inteligente, onde uma transa√ß√£o √© executada automaticamente quando certas condi√ß√µes s√£o atendidas.

Embora o script possa parecer complexo, a ideia b√°sica por tr√°s dele √© na verdade bastante simples. Ao usar o script, a rede Bitcoin pode automaticamente impor as regras e condi√ß√µes das transa√ß√µes, tornando-a uma forma segura e eficiente de transferir valor.

<br/>

***Como o Script √© Usado em Transa√ß√µes*** **$\color[RGB]{104,60,148} Bitcoin$**

- Imagine que voc√™ tenha uma fileira de moedas e queira classific√°-las em compartimentos diferentes, como colocar moedas em diferentes cofrinhos. A ordem em que voc√™ coloca as moedas nos compartimentos √© importante. Isso √© semelhante √† forma como os satoshis s√£o transferidos em uma transa√ß√£o. As entradas s√£o como uma fileira de moedas e as sa√≠das s√£o os compartimentos esperando para receber uma moeda. Para atribuir as moedas aos compartimentos, voc√™ passa por cada moeda na fileira, em ordem, e coloca cada uma no primeiro compartimento dispon√≠vel. Isso √© chamado de ‚Äúprimeiro a entrar, primeiro a sair‚Äù ou FIFO, o que significa que a primeira moeda na fileira vai para o primeiro compartimento dispon√≠vel, e assim por diante.

IMAGE

- Os scripts operam em um **sistema baseado em pilha**, onde as instru√ß√µes s√£o processadas na ordem em que aparecem, de cima para baixo. O conceito √© semelhante a uma pilha de pratos, onde voc√™ s√≥ pode acessar o prato que est√° no topo da pilha.


_______________________________________________________________________________________

Uma transa√ß√£o b√°sica de **$\color[RGB]{247,148,31} bitcoins$** utiliza pelo menos um ‚Äú**$\color[RGB]{3,130,3} script \ de \ bloqueio$**‚Äù e um ‚Äú**$\color[RGB]{240,43,43} script \ de \ desbloqueio$**‚Äù para determinar quem pode acessar os fundos em um determinado endere√ßo de carteira. O script de bloqueio pode ser considerado como uma **lista de instru√ß√µes que descreve como o destinat√°rio dos fundos pode acess√°-los**, enquanto o script de desbloqueio **desbloqueia os fundos**.

IMAGE

- Pense no Script como uma receita para assar um bolo. Assim como voc√™ precisa seguir os passos na receita para fazer o bolo, o computador precisa seguir as instru√ß√µes do Script em uma ordem espec√≠fica para transferir a propriedade do **$\color[RGB]{247,148,31} bitcoins$**.

Ao utilizar scripts de bloqueio e desbloqueio, juntamente com chaves privadas e p√∫blicas, a propriedade e a transfer√™ncia de UTXOs podem ser rastreadas e verificadas com seguran√ßa.

<br/>

### _7.4.1 Uma Imers√£o T√©cnica nas Transa√ß√µes do_ **$\color[RGB]{104,60,148} Bitcoin$**   

O script de bloqueio cont√©m o **endere√ßo do destinat√°rio** e verifica se a **$\color[RGB]{240,43,43} chave \ privada$** correta foi utilizada. Isso garante que as **$\color[RGB]{240,43,43} chave \ privadas$** permane√ßam confidenciais e possam ser protegidas com seguran√ßa.

Para desbloquear os fundos, o remetente deve comprovar a propriedade gerando uma **$\color[RGB]{0,174,239} assinatura$** com sua **$\color[RGB]{240,43,43} chave \ privada$**, confirmando assim a posse do **endere√ßo**.

IMAGE


_______________________________________________________________________________________

Por exemplo, digamos que voc√™ queira enviar alguns **$\color[RGB]{247,148,31} bitcoins$** para o seu amigo, mas deseja garantir que seu amigo s√≥ possa gast√°-los ap√≥s uma determinada data. Voc√™ pode usar o **$\color[RGB]{104,60,148} Bitcoin$** script para definir essa condi√ß√£o, conhecida como **‚Äúbloqueio por tempo‚Äù**. Ao criar a transa√ß√£o, voc√™ inclui um script que especifica a condi√ß√£o de bloqueio por tempo. Quando seu amigo recebe os **$\color[RGB]{247,148,31} bitcoin$**, ele s√≥ pode gast√°-los ap√≥s a data especificada ter passado.

IMAGE

O script do **$\color[RGB]{104,60,148} Bitcoin$** tamb√©m pode ser usado para criar condi√ß√µes mais complexas para gastar **$\color[RGB]{247,148,31} bitcoins$**, como transa√ß√µes de m√∫ltiplas assinaturas, que exigem que v√°rias partes autentiquem uma transa√ß√£o antes que ela possa ser gasta. Isso pode ser √∫til em situa√ß√µes em que v√°rias partes precisam aprovar uma transa√ß√£o.

IMAGE

- üí° **CHECKPRIVATEKEY** √© uma fun√ß√£o que verifica se o **endere√ßo** corresponde √† **$\color[RGB]{240,43,43} chave \ privada$** correta.

IMAGE

- üí° **CHECKSIG** verifica se a transa√ß√£o foi aprovada pelo propriet√°rio da **$\color[RGB]{240,43,43} chave \ privada$** que corresponde √† **$\color[RGB]{3,130,3} chave \ p√∫blica$** usada para assinar a **transa√ß√£o**.


_________________________________________________________________________________________

Em termos simples, o script ajuda a garantir a seguran√ßa e confiabilidade das transa√ß√µes do **$\color[RGB]{104,60,148} Bitcoin$** ao usar chaves privadas e p√∫blicas para verificar a propriedade e a transfer√™ncia dos fundos. M√©todos diferentes de transa√ß√µes t√™m n√≠veis de seguran√ßa variados. Alguns revelam a **$\color[RGB]{3,130,3} chave \ p√∫blica$** do destinat√°rio durante a transa√ß√£o, tornando-a vulner√°vel a roubo se a **$\color[RGB]{240,43,43} chave \ privada$** for comprometida. Outros mant√™m a **$\color[RGB]{3,130,3} chave \ p√∫blica$** oculta, proporcionando um n√≠vel mais alto de seguran√ßa.

No pr√≥ximo cap√≠tulo, iremos aprofundar o processo de minera√ß√£o e o papel dos mineradores na **$\color[RGB]{104,60,148} Rede \ Bitcoin$**. Exploraremos como eles validam as transa√ß√µes, criam novos blocos e recebem recompensas por seus esfor√ßos.

Fique atento para obter uma compreens√£o abrangente de como a **$\color[RGB]{104,60,148} Rede \ Bitcoin$** opera!
